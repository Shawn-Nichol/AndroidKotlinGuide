#  Service  
A  service is a pplication component respresenting either an application desire to perform a longer-running operation while not interacting with the user or to supply  fucntionality for other application to use. Each service class must have a corresponding <service> declaration in its package's AndroidManifes.xml. Services can be started with Context.startService() and Context.bindService()

Note that services like othere application objects run in the main thread of their hosting process. This means that, if your service is going to do nay CPU intesive or blocking operations, it should spawn its own thread in which to do that work. More information on this can be found in Processes and Threads. The JobIntentService class is aviablabe as a standard implementation of Service that has itw own thread where it schedules its work to be done. 

## Whats a service

Most confusion about the service class actually revolves around what it is not
-  A service is not a sepearatae process. The service object itself does not imply it is running in its own process; unless otherwise specified, it runs in the same process; it runs in the same process as the application it is par of. 

- A service is not a thread. It is not a means itself todo work off the main thread

Thus a  service itself is actually very simple providing tow main featgures
- A facitlity for the application to tell the system about something it wants to be doing in the background. This corresponds to calls to Context.startService(), which ask the systme to schedule work for the service, to be run until the service or someone else explicity stop it.

- A facility for an application eo expose some of its functionality to other applications. This corresponds to calls to Context.bindService, which allows a long-standing connection to be made to ther sercie in order to interact with it. 

When a service conponent is actually created for either of these reasons, all that the system actually does is instantiate the component and call its onCreate() and any other appropriate callbacks on the main thread. It is up to the SErvice to implement these with the appropriate behavior, such as creating a secondary thread in which it does its work. 

Note that becuase SErvice itself is so simple you can make your interactions with it as simple or complicated as you want: from treating it as local java object that you make direct mehtod calls on to providinga  full remoteable interface using AIDL. 

## Service LifeCycle
There are two reasons that a service can be run by the system. If someone calls Context.startSErvice() then the system will retrieve the service(creating it and calling its onCreate() method if needed) and then call its onStartCommand(intent, int, int) method with the arguments supplied by the client. THe service will at this point contineue running until COntext.stopService() or stopSelf() method to ensure the service is not stopped until started intents have been processeed. 

For started service, there are two additional major modes of operation they  can decided to run in, depending on the value they return from onStartCommand(): START_STICKY is used for services that are explicitly started and stopped as needed,  while START_NOT_STICKY or START_REDELIVER_INTENT are used for services tghat should only remain running while processing any commands sent to them. See the  linked docuemtnation for more details on the semantics. 

Clients can also use Context.bindService if it is not already running(calling onCreate() while doiong so), but does not call onStartCommand(). The client will recieve the IBinder object that the service returns from its onBind(Intent) method, allowing the client to then make calls back the ther service. The servi ce will remain running as long as the connection is established. ususally the IBinder returned is for a complex interface that has been written in aidl. 

A service can be both started an dhave connections bound to it. In such a case, the system will keep the service running as long as either it is started or there are one or more connections to it with the Context.Bind_AUTO_CREATE flag. Once neither of these situations hold, the service's onDestroy() method is called and the service is effectively terminated. All cleanup(stopping threads, unregistering recievers) should be complete upon returning from onDestory().

## Permissions
Global access to a service can be enforced when it is declared in the manifest<Service> tag. By doing so, other application will need to declare a corresponding <uses-permission> element in their own manifest to be able to start, stop, or bind the service. 

As a of Build.VERSION_CODES.GINGERBREAD when using Context#startSErvice, you can also set INtent#FLAG_GRANT_READ_URIpeRMISSION and or Intent#FLAG_GRANT_WRITE_URI_PERMISSION ON THE INTENT. This will grant ther serice temporary  access to the specific URIs in teh INtent. Access will remain until the SErvicde has called stopSelf(int) for that start command or a later one, or until the servide has been completely stopped. This works for granting access to the other apps that have not requested the permission protecting the SErvice, or even when the service is not exported at all. 

In addition, a service can protect individual IPC calls into it with permissions, by calling the ContextWrapper.checkCallingPermission(string) method before executing the implementation of that call 


## Process lifeCycle
The Android system will attempt to keep the process hosting a service around as long as the service has been stgarted or has clients bound to it. When running low on memory and needing to kill existing processes, the proprity of a process hosting the service will be the higher of the following possiblitites. 

- The service is currently executing code in its onCretae(), onStartCommand(), or onDestroy(), then the hosting process will be a foreground process to ensure this code can execute without being killed. 
- If the service has been started, then its hosting process is considered to be less important than any process that are currently visible to the user on-screen, but more important than any process not visible. Becuase only a few processes are generally visible to the user, this means that the service should not be killed except in low memory conditions. However, since the user is not directly aware of a background service, in that state it is considereed a valid candidate to kill, and you hsould be prepared for this to happen. In particular, long-running services will lbe increasingly likely to kill and are guaranteed to be killed if they remain started long enough.

If there are clients bound to the service, then the service's hosting process is never less important than the most important client. That is, if one of its clients is visible. The way a client's importance impacts the service's importance can be adjusted through 
Context#BIND_ABOVE_CLIENT, Context#BIND_ALLOW_OOM_MANAGEMENT, Context#BIND_WAIVE_PRIORITY, Context#BIND_IMPORTANT, and Context#BIND_ADJUST_WITH_ACTIVITY.

- A Started service can use the startForeground(int, android.app.Notification) API to put the service in a foreground state, where the system considers it to be somethign the user is actively aware of and thus not a candidate for killin ghwen low on memory. (It is still theorietically possible for the service to be killed under extreme memroy pressure from the current foreground application, but in practice this should not be a concern.

Note this means that most of the time your service is running, it may be killed by the system if it is under heavy memory pressure. If this happens the systme willl later tyr to restart the service. An important consequence of this is that if you implement onStartCommand() to schedule work to be done asynchronously or in another thread, then you may want to use START_FLAG_REDILIVERY  to have th system re-deliver an intent for you so that it does not get lost if you r service is killed while processing it

Other application components running in the smae process as the service can, of course, increase the importance of the overall process byond just the importance of the service itselt. 
